<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 750">
  <defs>
    <style>
      .bg { fill: #1e1e1e; }
      .title { fill: #ffffff; font-family: 'Segoe UI', Arial, sans-serif; font-size: 24px; font-weight: bold; }
      .text { fill: #e0e0e0; font-family: Arial, sans-serif; font-size: 14px; }
      .text-small { fill: #b0b0b0; font-family: Arial, sans-serif; font-size: 12px; }
      .method { fill: #2d2d2d; stroke: #569cd6; stroke-width: 2; }
      .method-error { fill: #5a1e1e; stroke: #f48771; stroke-width: 2; }
      .arrow-down { fill: none; stroke: #4ec9b0; stroke-width: 2; marker-end: url(#arrowhead-down); }
      .arrow-up { fill: none; stroke: #f48771; stroke-width: 3; marker-end: url(#arrowhead-up); stroke-dasharray: 5,5; }
      .code { fill: #dcdcaa; font-family: 'Courier New', monospace; font-size: 12px; }
      .comment { fill: #6a9955; font-family: 'Courier New', monospace; font-size: 11px; }
    </style>
    <marker id="arrowhead-down" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4ec9b0" />
    </marker>
    <marker id="arrowhead-up" markerWidth="12" markerHeight="12" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 12 3, 0 6" fill="#f48771" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect class="bg" width="900" height="750"/>
  
  <!-- Title -->
  <text class="title" x="450" y="35" text-anchor="middle">Propagación de Excepciones (Call Stack)</text>
  
  <!-- Left side: Code -->
  <rect x="50" y="60" width="400" height="630" rx="5" fill="#2d2d2d" stroke="#569cd6" stroke-width="2"/>
  <text class="text" x="70" y="85" font-weight="bold" fill="#569cd6">Código Java:</text>
  
  <!-- main() method -->
  <rect class="method" x="70" y="100" width="360" height="130" rx="3"/>
  <text class="code" x="85" y="120" fill="#c586c0">public static void</text>
  <text class="code" x="230" y="120" fill="#dcdcaa">main</text>
  <text class="code" x="265" y="120">(String[] args) {</text>
  <text class="code" x="100" y="140" fill="#c586c0">try</text>
  <text class="code" x="135" y="140">{</text>
  <text class="code" x="120" y="160">metodA();</text>
  <text class="comment" x="220" y="160">// ← Llamada inicial</text>
  <text class="code" x="100" y="180">} catch (Exception e) {</text>
  <text class="code" x="120" y="200" fill="#f48771">System.out.println</text>
  <text class="code" x="140" y="217">("❌ Error: " + e.getMessage());</text>
  <text class="code" x="100" y="220">}</text>
  <text class="code" x="85" y="225">}</text>
  
  <!-- metodA() -->
  <rect class="method" x="70" y="245" width="360" height="100" rx="3"/>
  <text class="code" x="85" y="265" fill="#c586c0">public static void</text>
  <text class="code" x="230" y="265" fill="#dcdcaa">metodA</text>
  <text class="code" x="285" y="265">() {</text>
  <text class="code" x="100" y="285">System.out.println("En método A");</text>
  <text class="code" x="100" y="305">metodB();</text>
  <text class="comment" x="200" y="305">// ← Llama a B</text>
  <text class="code" x="100" y="325">System.out.println("Fin de A");</text>
  <text class="comment" x="300" y="325">// ← Nunca ejecutado</text>
  <text class="code" x="85" y="340">}</text>
  
  <!-- metodB() -->
  <rect class="method" x="70" y="360" width="360" height="100" rx="3"/>
  <text class="code" x="85" y="380" fill="#c586c0">public static void</text>
  <text class="code" x="230" y="380" fill="#dcdcaa">metodB</text>
  <text class="code" x="285" y="380">() {</text>
  <text class="code" x="100" y="400">System.out.println("En método B");</text>
  <text class="code" x="100" y="420">metodC();</text>
  <text class="comment" x="200" y="420">// ← Llama a C</text>
  <text class="code" x="100" y="440">System.out.println("Fin de B");</text>
  <text class="comment" x="300" y="440">// ← Nunca ejecutado</text>
  <text class="code" x="85" y="455">}</text>
  
  <!-- metodC() with error -->
  <rect class="method-error" x="70" y="475" width="360" height="100" rx="3"/>
  <text class="code" x="85" y="495" fill="#c586c0">public static void</text>
  <text class="code" x="230" y="495" fill="#dcdcaa">metodC</text>
  <text class="code" x="285" y="495">() {</text>
  <text class="code" x="100" y="515">System.out.println("En método C");</text>
  <text class="code" x="100" y="535" fill="#f48771">int resultado = 10 / 0;</text>
  <text class="comment" x="100" y="555" fill="#f48771">// ❌ ArithmeticException aquí</text>
  <text class="code" x="85" y="570">}</text>
  
  <!-- Console output -->
  <rect x="70" y="600" width="360" height="80" rx="3" fill="#0d1117" stroke="#30363d" stroke-width="1"/>
  <text class="text-small" x="85" y="620" fill="#4ec9b0">Salida en consola:</text>
  <text class="code" x="85" y="640" fill="#e0e0e0">En método A</text>
  <text class="code" x="85" y="655" fill="#e0e0e0">En método B</text>
  <text class="code" x="85" y="670" fill="#e0e0e0">En método C</text>
  <text class="code" x="85" y="675" fill="#f48771">❌ Error: / by zero</text>
  
  
  <!-- Right side: Call Stack Visualization -->
  <rect x="500" y="60" width="350" height="630" rx="5" fill="#2d2d2d" stroke="#569cd6" stroke-width="2"/>
  <text class="text" x="520" y="85" font-weight="bold" fill="#569cd6">Pila de Llamadas (Stack):</text>
  
  <!-- Stack frames -->
  <text class="text-small" x="520" y="120" fill="#4ec9b0">1️⃣ Llamadas descendentes:</text>
  
  <!-- main() stack frame -->
  <rect x="520" y="135" width="310" height="50" rx="3" fill="#1e3a1e" stroke="#4ec9b0" stroke-width="2"/>
  <text class="code" x="540" y="155" fill="#dcdcaa">main()</text>
  <text class="text-small" x="540" y="175" fill="#b0b0b0">← try-catch está aquí</text>
  
  <!-- Arrow down -->
  <path class="arrow-down" d="M 675 185 L 675 205"/>
  <text class="text-small" x="685" y="198" fill="#4ec9b0">llamada →</text>
  
  <!-- metodA() stack frame -->
  <rect x="520" y="205" width="310" height="50" rx="3" fill="#1e3a1e" stroke="#4ec9b0" stroke-width="2"/>
  <text class="code" x="540" y="225" fill="#dcdcaa">metodA()</text>
  <text class="text-small" x="540" y="245" fill="#b0b0b0">← Llama a metodB()</text>
  
  <!-- Arrow down -->
  <path class="arrow-down" d="M 675 255 L 675 275"/>
  <text class="text-small" x="685" y="268" fill="#4ec9b0">llamada →</text>
  
  <!-- metodB() stack frame -->
  <rect x="520" y="275" width="310" height="50" rx="3" fill="#1e3a1e" stroke="#4ec9b0" stroke-width="2"/>
  <text class="code" x="540" y="295" fill="#dcdcaa">metodB()</text>
  <text class="text-small" x="540" y="315" fill="#b0b0b0">← Llama a metodC()</text>
  
  <!-- Arrow down -->
  <path class="arrow-down" d="M 675 325 L 675 345"/>
  <text class="text-small" x="685" y="338" fill="#4ec9b0">llamada →</text>
  
  <!-- metodC() stack frame with error -->
  <rect x="520" y="345" width="310" height="50" rx="3" fill="#5a1e1e" stroke="#f48771" stroke-width="3"/>
  <text class="code" x="540" y="365" fill="#dcdcaa">metodC()</text>
  <text class="text-small" x="540" y="385" fill="#f48771">❌ Excepción lanzada</text>
  
  <!-- Separator -->
  <line x1="520" y1="420" x2="830" y2="420" stroke="#569cd6" stroke-width="2" stroke-dasharray="5,5"/>
  
  <text class="text-small" x="520" y="445" fill="#f48771">2️⃣ Excepción se propaga (hacia arriba):</text>
  
  <!-- Exception bubbling up -->
  <path class="arrow-up" d="M 750 455 L 750 475"/>
  <text class="text-small" x="760" y="468" fill="#f48771">← PropEga</text>
  
  <rect x="520" y="475" width="310" height="40" rx="3" fill="#3d2a1e" stroke="#f48771" stroke-width="2"/>
  <text class="code" x="540" y="500" fill="#dcdcaa">metodB()</text>
  <text class="text-small" x="650" y="500" fill="#f48771">← Sin catch</text>
  
  <path class="arrow-up" d="M 750 515 L 750 535"/>
  <text class="text-small" x="760" y="528" fill="#f48771">← Propaga</text>
  
  <rect x="520" y="535" width="310" height="40" rx="3" fill="#3d2a1e" stroke="#f48771" stroke-width="2"/>
  <text class="code" x="540" y="560" fill="#dcdcaa">metodA()</text>
  <text class="text-small" x="650" y="560" fill="#f48771">← Sin catch</text>
  
  <path class="arrow-up" d="M 750 575 L 750 595"/>
  <text class="text-small" x="760" y="588" fill="#f48771">← Propaga</text>
  
  <rect x="520" y="595" width="310" height="40" rx="3" fill="#1e3a1e" stroke="#4ec9b0" stroke-width="3"/>
  <text class="code" x="540" y="620" fill="#dcdcaa">main()</text>
  <text class="text-small" x="650" y="620" fill="#4ec9b0">✅ catch aquí</text>
  
  <text class="text-small" x="520" y="655" fill="#4ec9b0" font-weight="bold">✅ Excepción capturada y manejada</text>
  <text class="text-small" x="520" y="675" fill="#e0e0e0">El programa NO se detiene.</text>
  
  
  <!-- Bottom legend -->
  <rect x="50" y="710" width="800" height="30" rx="5" fill="#264f78" stroke="#569cd6" stroke-width="2"/>
  <text class="text-small" x="70" y="730" fill="#ffffff">⚡ Sin try-catch: La excepción llegaría a la JVM y el programa TERMINARÍA abruptamente.</text>
</svg>
